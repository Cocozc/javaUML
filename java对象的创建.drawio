<mxfile host="www.draw.io" modified="2019-11-04T16:26:21.486Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.70 Safari/537.36" etag="PMB9Qoh9zH4w_YriCjuh" version="12.2.0" type="github" pages="1">
  <diagram id="ufODuIkPPXWT2OfJ0Gxm" name="第 1 页">
    <mxGraphModel dx="772" dy="473" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-10" value="&lt;span style=&quot;white-space: nowrap&quot;&gt;虚拟机遇到&lt;/span&gt;&lt;br style=&quot;white-space: nowrap&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;new字节码&lt;/span&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="100" y="150" width="100" height="950" as="geometry"/>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-32" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QwkURMbwjHm8o1MRPlY3-10" vertex="1">
          <mxGeometry x="45" y="484" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-33" value="设置初始值" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="QwkURMbwjHm8o1MRPlY3-10" target="QwkURMbwjHm8o1MRPlY3-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="460" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75" y="460"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-35" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QwkURMbwjHm8o1MRPlY3-10" vertex="1">
          <mxGeometry x="45" y="560" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-1" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="QwkURMbwjHm8o1MRPlY3-10">
          <mxGeometry x="45" y="410" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-2" value="验证类是否&lt;br&gt;符合jvm规范" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" edge="1" target="w7mTnO-IefMa6i2QqL2Q-1" parent="QwkURMbwjHm8o1MRPlY3-10">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="390" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75" y="390"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-12" value="常量池" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="260" y="150" width="100" height="410" as="geometry"/>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-14" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QwkURMbwjHm8o1MRPlY3-12" vertex="1">
          <mxGeometry x="50" y="90" width="10" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-15" value="检查常量池是否&lt;br&gt;有类的符号引用" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="1" source="QwkURMbwjHm8o1MRPlY3-10" target="QwkURMbwjHm8o1MRPlY3-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="240" as="sourcePoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-16" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="1" source="QwkURMbwjHm8o1MRPlY3-14" target="QwkURMbwjHm8o1MRPlY3-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="316" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-17" value="类加载器" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="413" y="150" width="100" height="410" as="geometry"/>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-18" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QwkURMbwjHm8o1MRPlY3-17" vertex="1">
          <mxGeometry x="45" y="180" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-23" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QwkURMbwjHm8o1MRPlY3-17" vertex="1">
          <mxGeometry x="45" y="200" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-24" value="类的加载&lt;br&gt;确定内存大小" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="QwkURMbwjHm8o1MRPlY3-17" target="QwkURMbwjHm8o1MRPlY3-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="180" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75" y="180"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-19" value="如果没有，就调用类加&lt;br&gt;载器加载当前类的信息" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="1" source="QwkURMbwjHm8o1MRPlY3-10" target="QwkURMbwjHm8o1MRPlY3-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="383" y="300" as="sourcePoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-20" value="从方法区中&lt;br&gt;拿到类的信息" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="1" source="QwkURMbwjHm8o1MRPlY3-18" target="QwkURMbwjHm8o1MRPlY3-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="383" y="376" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-25" value="堆" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="560" y="150" width="100" height="410" as="geometry"/>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-31" value="分配内存：指针碰撞（内存空间规整）、空闲列表（不规整）&lt;br&gt;这个过程不是线程安全的，因为使用到了堆中的指针来分配&lt;br&gt;两种方法解决：1、分配的时候同步&lt;br&gt;&amp;nbsp;2、使用TLAB（本地线程分配缓冲Thread local Allocation Buffer）" style="html=1;verticalAlign=bottom;endArrow=block;" parent="1" source="QwkURMbwjHm8o1MRPlY3-10" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="100" y="580" as="sourcePoint"/>
            <mxPoint x="610" y="490" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="220" y="490"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QwkURMbwjHm8o1MRPlY3-36" value="从常量池中寻找类、接口、字段、方法的符号引用，&lt;br&gt;并把这些符号引用替换为直接引用" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="1" target="QwkURMbwjHm8o1MRPlY3-35" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="155" y="690" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="180" y="690"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-3" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="50" y="530" as="sourcePoint"/>
            <mxPoint x="690" y="530" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-4" value="加载" style="text;html=1;resizable=0;points=[];autosize=1;align=left;verticalAlign=top;spacingTop=-4;" vertex="1" parent="1">
          <mxGeometry x="80" y="345" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-5" value="链接" style="text;html=1;resizable=0;points=[];autosize=1;align=left;verticalAlign=top;spacingTop=-4;" vertex="1" parent="1">
          <mxGeometry x="80" y="680" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-6" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="40" y="794.5" as="sourcePoint"/>
            <mxPoint x="680" y="794.5" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-7" value="初始化" style="text;html=1;resizable=0;points=[];autosize=1;align=left;verticalAlign=top;spacingTop=-4;" vertex="1" parent="1">
          <mxGeometry x="82" y="844" width="50" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-8" value="验证" style="text;html=1;resizable=0;points=[];autosize=1;align=left;verticalAlign=top;spacingTop=-4;" vertex="1" parent="1">
          <mxGeometry x="107" y="564" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-9" value="准备" style="text;html=1;resizable=0;points=[];autosize=1;align=left;verticalAlign=top;spacingTop=-4;" vertex="1" parent="1">
          <mxGeometry x="107" y="640" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-10" value="解析" style="text;html=1;resizable=0;points=[];autosize=1;align=left;verticalAlign=top;spacingTop=-4;" vertex="1" parent="1">
          <mxGeometry x="107" y="720" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-11" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="1">
          <mxGeometry x="144" y="840" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="w7mTnO-IefMa6i2QqL2Q-12" value="初始化数据，对象头，实例数据，对齐填充" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" edge="1" parent="1" target="w7mTnO-IefMa6i2QqL2Q-11">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="154" y="820" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="179" y="820"/>
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
